# Backend Integration Guide\n\n## Configuration\n\n### 1. Variables d'environnement\n\nCréez un fichier `.env` dans le répertoire `Front/` avec :\n\n```env\nREACT_APP_API_URL=http://localhost:8000/api\nREACT_APP_ENVIRONMENT=development\n```\n\n### 2. URL du Backend\n\nAssurez-vous que votre backend Django est en cours d'exécution sur `http://localhost:8000`\n\n## Services API\n\n### Structure des services\n\n```\nsrc/services/\n├── api.ts              # Configuration API de base\n├── authService.ts      # Service d'authentification\n└── eventService.ts     # Service des événements\n```\n\n### Points d'API supportés\n\n#### Authentification\n- `POST /api/auth/login/` - Connexion\n- `POST /api/auth/register/` - Inscription\n- `POST /api/auth/refresh/` - Rafraîchissement du token\n- `GET /api/students/profile/` - Profil utilisateur\n\n#### Événements\n- `GET /api/events/` - Liste des événements\n- `POST /api/events/` - Créer un événement\n- `GET /api/events/{id}/` - Détail d'un événement\n- `PATCH /api/events/{id}/` - Modifier un événement\n- `DELETE /api/events/{id}/` - Supprimer un événement\n- `POST /api/events/{id}/join/` - Rejoindre un événement\n- `DELETE /api/events/{id}/leave/` - Quitter un événement\n- `POST /api/events/{id}/like/` - Aimer un événement\n- `GET /api/events/my-events/` - Événements organisés\n- `GET /api/events/attending/` - Événements auxquels on participe\n\n## Utilisation des Hooks\n\n### Hook useEvents\n\n```typescript\nimport { useEvents } from '../hooks/useEvents';\n\nconst EventsComponent = () => {\n  const {\n    filteredEvents,\n    loading,\n    error,\n    searchQuery,\n    setSearchQuery,\n    joinEvent,\n    createEvent,\n    refreshEvents\n  } = useEvents();\n\n  // Le hook gère automatiquement :\n  // - Le chargement des données\n  // - La mise en cache\n  // - La gestion d'erreurs\n  // - Les filtres de recherche\n};\n```\n\n### Hook useAuth\n\n```typescript\nimport { useAuth } from '../hooks/useAuth';\n\nconst LoginComponent = () => {\n  const { user, login, logout, isLoading } = useAuth();\n\n  const handleLogin = async (username: string, password: string) => {\n    const success = await login(username, password);\n    if (success) {\n      // Redirection après connexion\n    }\n  };\n};\n```\n\n## Format des Données\n\n### Transformation Backend → Frontend\n\nLes données du backend sont automatiquement transformées :\n\n```typescript\n// Backend (Django)\ninterface BackendEvent {\n  id: string;\n  title: string;\n  event_type: 'ACADEMIC' | 'SOCIAL' | ...;\n  start_datetime: string;\n  organizer: {\n    first_name: string;\n    last_name: string;\n    ...\n  };\n}\n\n// Frontend (React)\ninterface Event {\n  id: string;\n  title: string;\n  eventType: 'ACADEMIC' | 'SOCIAL' | ...;\n  startDateTime: string;\n  organizer: {\n    name: string; // Combinaison de first_name + last_name\n    ...\n  };\n}\n```\n\n## Gestion d'Erreurs\n\n### Authentification\n- Tokens expirés → Rafraîchissement automatique\n- Échec d'authentification → Fallback sur des comptes de test\n- Pas de connexion → Mode offline avec données locales\n\n### Événements\n- Erreurs de réseau → Affichage d'un message d'erreur avec bouton de retry\n- Données manquantes → États de chargement appropriés\n- Échec de création → Messages d'erreur détaillés\n\n## Mode Test/Développement\n\n### Comptes de test\n\nSi l'API backend n'est pas disponible, le système bascule automatiquement sur des comptes de test :\n\n- **Username**: `demo_student` / **Password**: `demo123`\n- **Username**: `student2` / **Password**: `password123`\n- **Username**: `admin_user` / **Password**: `admin123`\n\n### Connexion directe (développement)\n\n```typescript\nconst { directLogin } = useAuth();\n\n// Connexion directe sans mot de passe (développement uniquement)\ndirectLogin('demo_student');\n```\n\n## État de Chargement\n\nTous les hooks gèrent automatiquement les états :\n\n```typescript\nconst { events, loading, error } = useEvents();\n\nif (loading) return <LoadingSpinner />;\nif (error) return <ErrorMessage error={error} />;\nreturn <EventsList events={events} />;\n```\n\n## Cache et Performance\n\n### Mise en cache automatique\n- Les données utilisateur sont sauvegardées localement\n- Les événements sont mis en cache pendant la session\n- Rafraîchissement intelligent des données\n\n### Optimisations\n- Requêtes regroupées pour réduire les appels API\n- Mise à jour optimiste de l'UI\n- Synchronisation automatique des données\n\n## Débogage\n\n### Console de développement\n- Tous les appels API sont loggés\n- Les erreurs incluent des messages détaillés\n- Les transformations de données sont tracées\n\n### Variables d'environnement de debug\n\n```env\nREACT_APP_API_URL=http://localhost:8000/api\nREACT_APP_ENVIRONMENT=development\nREACT_APP_DEBUG=true\n```\n\n## Sécurité\n\n### Tokens JWT\n- Stockage sécurisé des tokens\n- Rafraîchissement automatique\n- Nettoyage lors de la déconnexion\n\n### Validation des données\n- Validation côté frontend avant envoi\n- Sanitisation des données reçues\n- Gestion des erreurs de validation\n\n## Migration depuis les Données Mock\n\nLe système est conçu pour une transition transparente :\n\n1. **Phase 1** : Données mock uniquement (développement)\n2. **Phase 2** : API + fallback mock (test)\n3. **Phase 3** : API uniquement (production)\n\nAucune modification de l'UI n'est nécessaire grâce aux hooks abstraits.\n